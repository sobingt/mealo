<html>
  <head>
    <title>Restaurants</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
      html, body, #map-canvas {
        margin: 0;
        padding: 0;
		width:100%;
        height: 320px;
      }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
    <script>
	{{#each restdata}}
	if({{@index}} == 0)
	{
	 var firstplace = new google.maps.LatLng({{latitude}}, {{longitude}});
	}
	var place = new google.maps.LatLng({{latitude}}, {{longitude}});
	{{/each}}	
	var map;
function initialize() {
  var mapOptions = {
    zoom: 10,
	center: firstplace,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  map = new google.maps.Map(document.getElementById('map-canvas'),
      mapOptions);
	  //console.log({{total.1place}}); 
{{#each restdata}} 

	//var {{place}} = new google.maps.LatLng({{lat}}, {{lon}});
	// Adding a Marker to the google maps.
    marker_{{id}} = new google.maps.Marker({
		map: map,
		draggable: false,
		animation: google.maps.Animation.DROP,
		position: new google.maps.LatLng({{latitude}}, {{longitude}}),
    });
	marker_{{id}}['infowindow'] = new google.maps.InfoWindow({
	content: 'hi'
	});
google.maps.event.addListener(marker_{{id}}, 'click', function(e){toggleBounce(marker_{{id}})} );
//info window on mouse over
google.maps.event.addListener(marker_{{id}}, 'mouseover', function() {
    marker_{{id}}['infowindow'].open(map, this);
});
// assuming you also want to hide the infowindow when user mouses-out
google.maps.event.addListener(marker_{{id}}, 'mouseout', function() {
    marker_{{id}}['infowindow'].close();
});

function toggleBounce(marker){
 if (marker.getAnimation() != null) {
    marker.setAnimation(null);
  } else {
    marker.setAnimation(google.maps.Animation.BOUNCE);
  }
}
{{/each}}
}
google.maps.event.addDomListener(window, 'load', initialize);
</script>

  </head>
  <body>
  <div id="map-canvas"></div>
  </body>
</html>